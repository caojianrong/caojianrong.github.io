<html>
<head>
  <title>react生命周期</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600986 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="802"/>
<h1>react生命周期</h1>

<div>
<span><div><div><font><font style="font-weight: bold; font-size: 24pt; color: rgb(79, 0, 154);">一、15.6版本：</font></font></div><div><font><font color="#FF0000" style="font-size: 14pt; font-weight: bold;">1、getDefaultProps</font><font style="font-size: 12pt;">：（16版本废弃）</font></font></div><ul><li><div><span style="font-size: 12pt;">初始化</span><font style="font-size: 12pt;">props数据；</font></div></li></ul><ul><li><div><font style="font-size: 12pt;">没有组件对象，this指向构造函数，没有数据，没有dom</font></div></li></ul><div><font><b style="color: rgb(255, 0, 0);"><span style="font-size: 14pt;">2、getInitialState</span><font style="font-size: 12pt;">：</font></b><font style="font-size: 12pt;">（16版本废弃）</font></font></div><ul><li><div><font style="font-size: 12pt;">初始化state值；</font></div></li><li><div><span style="font-size: 16px;">初始化state，this指向的是组件对象没有数据，没有dom</span></div></li></ul><div><font style="font-size: 14pt; color: rgb(255, 0, 0);"><b>3、componentWillMount：</b></font><span style="font-size: 14pt; color: rgb(255, 0, 0); font-weight: bold;">(16版本不安全，17被废弃)</span></div><ul><li><div><font style="font-size: 12pt;">组件挂载前；</font></div></li><li><div><font style="font-size: 12pt;"><b>有数据，没有dom，修改数据不需要setState，不会触发render的重新执行；</b></font></div></li><li><div><span style="font-size: 16px;"><b>可以发起ajax请求，但是不推荐</b></span></div></li></ul><div><span style="font-size: 12pt;"><b><br/></b></span></div><div><span style="font-size: 12pt;"><b>（</b></span></div><div style="margin-left: 40px;"><b style="font-size: 12pt;">16.3版本组件从同步渲染-----》异步渲染；</b></div><div style="margin-left: 40px;"><span style="font-size: 12pt;"><b>render前的生命周期可能被优先级高的事务打断，打断之后这些生命周期要重新执行；</b></span></div><div style="margin-left: 40px;"><span style="font-size: 12pt;"><b>如果在这些生命周期做网络请求，可能会导致请求多次发起；</b></span></div><div style="margin-left: 40px;"><span style="font-size: 12pt;"><b>16版本该生命周期是不安全的；</b></span></div><div style="margin-left: 40px;"><span style="font-size: 12pt;"><b>17版本该生命周期废弃。</b></span></div><div><b style="font-size: 12pt;"><span>    </span>）</b></div><div><font style="font-size: 18pt;"><span style="color: rgb(255, 0, 0); font-weight: bold;">4、</span><span style="font-weight: bold;"><font style="color: rgb(255, 0, 0);">componentDidMount：</font></span></font></div><ul><li><div><font style="font-size: 12pt;">挂载结束；</font></div></li><li><div><span style="font-size: 16px;"><b>有数据，有DOM，DOM初始化操作（swiper，better-scroll）</b></span></div></li><li><div><span style="font-size: 16px;"><b>做网络请求；</b></span></div></li></ul><div><span style="font-size: 14pt; color: rgb(255, 0, 0); font-weight: bold;">5、shouldComponentUpdate（props,state）：</span></div><ul><li><div><font style="font-size: 12pt;"><b>可以控制render函数是否执行；</b></font></div></li><li><div><span style="font-size: 16px;"><b>可以做效率优化；</b></span></div></li><li><div><span style="font-size: 16px;"><b>参数2 是改变之后的state值；</b></span></div></li><li><div><b><font style="font-size: 12pt;">this.state是修改前的state值，所以可以通过判断this.state与state是否相同来控制是否执行rende</font><font style="font-size: 12pt;">r，根据返回的数据控制组件的渲染</font></b></div></li></ul><div><span style="font-size: 14pt; color: rgb(255, 0, 0); font-weight: bold;">6、componentWillUpdate：(16版本不安全，17被废弃)</span></div><ul><li><div><span style="font-size: 16px;">更新之前；</span></div></li><li><div><span style="font-size: 16px;">监听数据的改变；</span></div></li><li><div><span style="font-size: 16px;">数据dom都是修改之前的；</span></div></li><li><div><span style="font-size: 16px;"><b>数据赋值谨慎</b></span></div></li></ul><div><span style="font-size: 14pt; color: rgb(255, 0, 0); font-weight: bold;">7、componentDidUpdate:</span></div><ul><li><div><font style="font-size: 12pt;">可以监听数据的改变；</font></div></li><li><div><font style="font-size: 12pt;">数据的更新操作，很容易引入死循环；</font></div></li><li><div><span style="font-size: 16px;">数据dom都是修改之后的；</span></div></li><li><div><span style="font-size: 16px;"><b>数据赋值谨慎</b></span></div></li></ul><div><span style="font-size: 12pt;"><b><br/></b></span></div><div><span style="font-size: 14pt; color: rgb(255, 0, 0); font-weight: bold;">8、componentWillReceiveProps(props):</span><span style="font-size: 14pt; color: rgb(255, 0, 0); font-weight: bold;">(16版本不安全，17被废弃)</span></div><ul><li><div><span style="font-size: 12pt;">props发生改变；</span></div></li><li><div><span style="font-size: 16px;">监听props改变，也可以做网络请求，但是不用</span></div></li></ul><div><span style="font-size: 14pt; color: rgb(255, 0, 0); font-weight: bold;">9、componentWillUnmount:</span></div><ul><li><div><font style="font-size: 12pt; color: rgb(70, 70, 70);">组件销毁触发，可以获取dom;</font></div></li></ul><ul><li><div><span style="font-size: 16px;">组件移除之前的检测，全局计时器，事件监听；</span></div></li></ul><div><span style="font-size: 12pt;"><br/></span></div><div><span style="font-weight: bold; font-size: 24pt; color: rgb(79, 0, 154);">二、16版本：</span></div><div><span style="font-weight: bold;"><font style="font-size: 14pt;">1、</font></span><span style="font-size: 14pt; font-weight: bold;">constructor代替props和state初始化的生命周期；</span></div><div><span style="font-size: 14pt;"><b><br/></b></span></div><div><span style="font-size: 18.6667px;"><b>2、render之前带will的生命周期，变得不安全，为17版本删除做准备；</b></span></div><ul><li><div><span style="font-size: 14pt;">UNSAFE_componentWillMount;</span></div></li><li><div><span style="font-size: 14pt;">UNSAFE_componentWillReceiveProps;</span></div></li><li><div><span style="font-size: 14pt;">UNSAFE_componentWillUpdate</span></div></li></ul><div><span style="font-weight: bold; font-size: 14pt;">3、保持不变</span></div><ul><li><div><span style="font-size: 18.6667px;"><b>componentDidMount;</b></span></div></li><li><div><span style="font-size: 14pt;"><b>shouldComponentUpdate;</b></span></div></li><li><div><span style="font-size: 14pt;"><b>componentDidUpdate;</b></span></div></li><li><div><span style="font-size: 14pt;"><b>componentWillUnMount</b></span></div></li></ul><div><font color="#4F009A"><span style="font-size: 18.6667px;"><b>新增2个生命周期</b></span></font></div><div><span style="font-weight: bold; font-size: 24pt; color: rgb(79, 0, 154);"><br/></span></div><div><span style="color: rgb(79, 0, 154); font-family: 微软雅黑; font-size: 32px; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: bold; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">二、17版本：</span></div><div><font><span style="font-size: 18.6667px;"><b>将UNSAFE的3个生命周期正式删除</b></span></font></div><div><span style="font-weight: bold; font-size: 24pt; color: rgb(79, 0, 154);"><br/></span></div><div><span style="font-weight: bold; font-size: 24pt; color: rgb(79, 0, 154);"><br/></span></div><div><span style="font-weight: bold; font-size: 24pt; color: rgb(79, 0, 154);"><br/></span></div><div><span style="font-weight: bold; font-size: 24pt; color: rgb(79, 0, 154);"><br/></span></div><div><span style="font-size: 12pt;"><b><br/></b></span></div><div><br/></div></div></span>
</div></body></html> 